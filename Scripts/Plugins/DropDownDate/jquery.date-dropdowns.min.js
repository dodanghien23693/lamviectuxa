(function(n,t,i){"use strict";function r(t,i){return this.element=t,this.$element=n(t),this.config=n.extend({},f,i),this.internals={objectRefs:{}},this._defaults=f,this._name=u,this.init(),this}var u="dateDropdowns",f={defaultDate:null,defaultDateFormat:"yyyy-mm-dd",displayFormat:"dmy",submitFormat:"yyyy-mm-dd",minAge:0,maxAge:120,minYear:null,maxYear:null,submitFieldName:"Birthday",wrapperClass:"date-dropdowns",daySuffixes:!1,monthSuffixes:!1,monthFormat:"long",required:!1};r.message={day:"Day",month:"Month",year:"Year"};n.extend(r.prototype,{init:function(){this.checkForDuplicateElement();this.setInternalVariables();this.setupMarkup();this.buildDropdowns();this.attachDropdowns();this.bindChangeEvent();this.config.defaultDate&&this.populateDefaultDate()},checkForDuplicateElement:function(){return!0},setInternalVariables:function(){var n=new Date;this.internals.currentDay=n.getDate();this.internals.currentMonth=n.getMonth()+1;this.internals.currentYear=n.getFullYear();this.internals.monthShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.internals.monthLong=["January","February","March","April","May","June","July","August","September","October","November","December"]},setupMarkup:function(){var i,t;return this.element.tagName.toLowerCase()==="input"?(this.config.defaultDate||(this.config.defaultDate=this.element.value),t=this.$element.attr("type","hidden").attr("name",this.config.submitFieldName).wrap('<div class="'+this.config.wrapperClass+'"><\/div>'),i=this.$element.parent()):(t=n("<input/>",{type:"hidden",name:this.config.submitFieldName}),this.$element.append(t).addClass(this.config.wrapperClass),i=this.$element),this.internals.objectRefs.pluginWrapper=i,this.internals.objectRefs.hiddenField=t,!0},buildDropdowns:function(){var n,t,i;return n=this.buildDayDropdown(),this.internals.objectRefs.dayDropdown=n,t=this.buildMonthDropdown(),this.internals.objectRefs.monthDropdown=t,i=this.buildYearDropdown(),this.internals.objectRefs.yearDropdown=i,!0},attachDropdowns:function(){var n=this.internals.objectRefs.pluginWrapper,t=this.internals.objectRefs.dayDropdown,i=this.internals.objectRefs.monthDropdown,r=this.internals.objectRefs.yearDropdown;switch(this.config.displayFormat){case"mdy":n.append(i,t,r);break;case"ymd":n.append(r,i,t);break;case"dmy":default:n.append(t,i,r)}return!0},bindChangeEvent:function(){var i=this.internals.objectRefs.dayDropdown,r=this.internals.objectRefs.monthDropdown,u=this.internals.objectRefs.yearDropdown,t=this,n=this.internals.objectRefs;n.pluginWrapper.on("change","select",function(){var f=i.val(),e=r.val(),o=u.val(),s=!0,h;if(s=t.checkDate(f,e,o),s)return n.dayDropdown.addClass("invalid"),!1;"00"!==n.dayDropdown.val()&&n.dayDropdown.removeClass("invalid");n.hiddenField.val("");s||f*e*o==0||(h=t.formatSubmitDate(f,e,o),n.hiddenField.val(h));n.hiddenField.change()})},populateDefaultDate:function(){var u=this.config.defaultDate,n=[],t="",i="",r="";switch(this.config.defaultDateFormat){case"yyyy-mm-dd":default:n=u.split("-");t=n[2];i=n[1];r=n[0];break;case"dd/mm/yyyy":n=u.split("/");t=n[0];i=n[1];r=n[2];break;case"mm/dd/yyyy":n=u.split("/");t=n[1];i=n[0];r=n[2];break;case"unix":n=new Date;n.setTime(u*1e3);t=n.getDate()+"";i=n.getMonth()+1+"";r=n.getFullYear();t.length<2&&(t="0"+t);i.length<2&&(i="0"+i)}return this.internals.objectRefs.dayDropdown.val(t),this.internals.objectRefs.monthDropdown.val(i),this.internals.objectRefs.yearDropdown.val(r),this.internals.objectRefs.hiddenField.val(u),!0===this.checkDate(t,i,r)&&this.internals.objectRefs.dayDropdown.addClass("invalid"),!0},buildBaseDropdown:function(t){return n("<select><\/select>",{"class":t,name:this.config.submitFieldName+"_["+t+"]",required:this.config.required})},buildDayDropdown:function(){var f,e=this.buildBaseDropdown("day"),n=i.createElement("option"),t,u;for(n.setAttribute("value",""),n.appendChild(i.createTextNode(r.message.day)),e.append(n),t=1;t<10;t++)f=this.config.daySuffixes?t+this.getSuffix(t):"0"+t,n=i.createElement("option"),n.setAttribute("value","0"+t),n.appendChild(i.createTextNode(f)),e.append(n);for(u=10;u<=31;u++)f=u,this.config.daySuffixes&&(f=u+this.getSuffix(u)),n=i.createElement("option"),n.setAttribute("value",u),n.appendChild(i.createTextNode(f)),e.append(n);return e},buildMonthDropdown:function(){var f=this.buildBaseDropdown("month"),t=i.createElement("option"),n,u;for(t.setAttribute("value",""),t.appendChild(i.createTextNode(r.message.month)),f.append(t),n=1;n<=12;n++){switch(this.config.monthFormat){case"short":u=this.internals.monthShort[n-1];break;case"long":u=this.internals.monthLong[n-1];break;case"numeric":u=n;this.config.monthSuffixes&&(u+=this.getSuffix(n))}n<10&&(n="0"+n);t=i.createElement("option");t.setAttribute("value",n);t.appendChild(i.createTextNode(u));f.append(t)}return f},buildYearDropdown:function(){var u=this.config.minYear,f=this.config.maxYear,e=this.buildBaseDropdown("year"),n=i.createElement("option"),t;for(n.setAttribute("value",""),n.appendChild(i.createTextNode(r.message.year)),e.append(n),u||(u=this.internals.currentYear-(this.config.maxAge+1)),f||(f=this.internals.currentYear-this.config.minAge),t=f;t>=u;t--)n=i.createElement("option"),n.setAttribute("value",t),n.appendChild(i.createTextNode(t)),e.append(n);return e},getSuffix:function(n){var t="";switch(n%10){case 1:t=n%100==11?"th":"st";break;case 2:t=n%100==12?"th":"nd";break;case 3:t=n%100==13?"th":"rd";break;default:t="th"}return t},checkDate:function(n,t,i){var r,u,f;return t!=="00"&&(u=new Date(i,t,0).getDate(),f=parseInt(n,10),r=this.updateDayOptions(u,f),r&&this.internals.objectRefs.hiddenField.val("")),r},updateDayOptions:function(n,t){var r=parseInt(this.internals.objectRefs.dayDropdown.children(":last").val(),10),f="",e="",o=!1,u;if(r>n){while(r>n)this.internals.objectRefs.dayDropdown.children(":last").remove(),r--;t>n&&(o=!0)}else if(r<n)while(r<n)f=++r,e=f,this.config.daySuffixes&&(e+=this.getSuffix(r)),u=i.createElement("option"),u.setAttribute("value",f),u.appendChild(i.createTextNode(e)),this.internals.objectRefs.dayDropdown.append(u);return o},formatSubmitDate:function(n,t,i){var r,u;switch(this.config.submitFormat){case"yyyy-mm-dd":default:r=i+"-"+t+"-"+n;break;case"mm/dd/yyyy":r=t+"/"+n+"/"+i;break;case"dd/mm/yyyy":r=n+"/"+t+"/"+i;break;case"unix":u=new Date;u.setDate(n);u.setMonth(t-1);u.setYear(i);r=Math.round(u.getTime()/1e3)}return r},destroy:function(){var i=this.config.wrapperClass,n,t;this.$element.hasClass(i)?this.$element.empty():(n=this.$element.parent(),t=n.find("select"),this.$element.unwrap(),t.remove())}});n.fn[u]=function(t){return this.each(function(){if(typeof t=="string"){var f=Array.prototype.slice.call(arguments,1),i=n.data(this,"plugin_"+u);if(typeof i=="undefined")return n.error("Please initialize the plugin before calling this method."),!1;i[t].apply(i,f)}else n.data(this,"plugin_"+u)||n.data(this,"plugin_"+u,new r(this,t))}),this}})(jQuery,window,document);
//# sourceMappingURL=jquery.date-dropdowns.min.js.map
